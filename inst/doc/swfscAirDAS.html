<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Introduction to swfscAirDAS</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to swfscAirDAS</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(tibble) <span class="co">#For printing output</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(stringr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(swfscAirDAS)</span></code></pre></div>
<p>This document introduces you to the swfscAirDAS package. This package is intended to standardize and streamline processing of aerial survey DAS (AirDAS) data collected using the PHOCOENA, TURTLE, or CARETTA programs from the Southwest Fisheries Science Center. In DAS data (and thus AirDAS data), an event is only recorded when something changes or happens, which can complicate processing. Thus, the main theme of this package is enabling analyses and downstream processing by 1) determining associated state and condition information for each event and 2) pulling out event-specific information from the Data columns. The following examples generally use the default function arguments; see the documentation for the individual functions for a complete description of all processing options.</p>
<div id="data" class="section level2">
<h2>Data</h2>
<p>This package includes a sample AirDAS file, which we will use in this document. This file is formatted as a DAS file created using the TURTLE program</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>y &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;airdas_sample.das&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;swfscAirDAS&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">head</span>(<span class="kw">readLines</span>(y))</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt; [1] &quot;  1C 123059 040915 N39:14.13 W123:09.38 Recorder: dd                                &quot;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; [2] &quot;  2C 123059 040915 N39:14.13 W123:09.38 Not recording molas                         &quot;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; [3] &quot;  3T.123059 040915 N39:14.13 W123:09.38   T1                                        &quot;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; [4] &quot;  4V.123059 040915 N39:14.13 W123:09.38    g    g    g    g    g                    &quot;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; [5] &quot;  5P.123059 040915 N39:14.13 W123:09.38   aa   bb   cc   dd                         &quot;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; [6] &quot;  6A.123059 040915 N39:14.13 W123:09.38  650  100                                   &quot;</span></span></code></pre></div>
</div>
<div id="check-data-format" class="section level2">
<h2>Check data format</h2>
<p>The first step in processing AirDAS data is to ensure that the DAS file has expected formatting and values, which you can do using the <code>airdas_check</code> function. The checks performed by this function are detailed in the function documentation, which can be accessed by running <code>?airdas_check</code>. If you aren’t sure of the file type (format) of your data, you can check the format PDFs. These PDFs are available online at <a href="https://smwoodman.github.io/swfscAirDAS/" class="uri">https://smwoodman.github.io/swfscAirDAS/</a>, or see <code>?airdas_format_pdf</code> for how to access a local copy.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Code not run</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>y.check &lt;-<span class="st"> </span><span class="kw">airdas_check</span>(y, <span class="dt">file.type =</span> <span class="st">&quot;turtle&quot;</span>, <span class="dt">skip =</span> <span class="dv">0</span>, <span class="dt">print.transect =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="read-and-process-data" class="section level2">
<h2>Read and process data</h2>
<p>Once QA/QC is complete and you have fixed any data entry errors, you can begin to process the AirDAS data. The backbone of this package is the reading and processing steps: 1) the data from the DAS file are read into the columns of a data frame and 2) state and condition information are extracted for each event. This means that after processing, you can simply look at any event (row) and determine the Beaufort, viewing conditions, etc., at the time of the event. All other functions in the package depend on the AirDAS data being in this processed state.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Read </span></span>
<span id="cb4-2"><a href="#cb4-2"></a>y.read &lt;-<span class="st"> </span><span class="kw">airdas_read</span>(y, <span class="dt">file.type =</span> <span class="st">&quot;turtle&quot;</span>, <span class="dt">skip =</span> <span class="dv">0</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw">head</span>(y.read)</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;   Event EffortDot            DateTime     Lat       Lon Data1 Data2 Data3 Data4</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt; 1     C     FALSE 2015-04-09 12:30:59 39.2355 -123.1563  Reco rder:  dd    &lt;NA&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; 2     C     FALSE 2015-04-09 12:30:59 39.2355 -123.1563  Not  recor ding  molas</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt; 3     T      TRUE 2015-04-09 12:30:59 39.2355 -123.1563    T1  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt; 4     V      TRUE 2015-04-09 12:30:59 39.2355 -123.1563     g     g     g     g</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt; 5     P      TRUE 2015-04-09 12:30:59 39.2355 -123.1563    aa    bb    cc    dd</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt; 6     A      TRUE 2015-04-09 12:30:59 39.2355 -123.1563   650   100  &lt;NA&gt;  &lt;NA&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt;   Data5 Data6 Data7 EventNum          file_das line_num file_type</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; 1  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        1 airdas_sample.das        1    turtle</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt; 2  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        2 airdas_sample.das        2    turtle</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt; 3  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        3 airdas_sample.das        3    turtle</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt; 4     g  &lt;NA&gt;  &lt;NA&gt;        4 airdas_sample.das        4    turtle</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt; 5  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        5 airdas_sample.das        5    turtle</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#&gt; 6  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;        6 airdas_sample.das        6    turtle</span></span>
<span id="cb4-18"><a href="#cb4-18"></a></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co"># Process</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>y.proc &lt;-<span class="st"> </span><span class="kw">airdas_process</span>(y.read, <span class="dt">trans.upper =</span> <span class="ot">TRUE</span>)</span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="kw">head</span>(y.proc)</span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">#&gt;   Event            DateTime     Lat       Lon OnEffort Trans Bft CCover Jelly</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">#&gt; 1     C 2015-04-09 12:30:59 39.2355 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">#&gt; 2     C 2015-04-09 12:30:59 39.2355 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co">#&gt; 3     T 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co">#&gt; 4     V 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="co">#&gt; 5     P 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span id="cb4-28"><a href="#cb4-28"></a><span class="co">#&gt; 6     A 2015-04-09 12:30:59 39.2355 -123.1563     TRUE    T1  NA     NA    NA</span></span>
<span id="cb4-29"><a href="#cb4-29"></a><span class="co">#&gt;   HorizSun VertSun  HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR  Rec</span></span>
<span id="cb4-30"><a href="#cb4-30"></a><span class="co">#&gt; 1       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="co">#&gt; 2       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb4-32"><a href="#cb4-32"></a><span class="co">#&gt; 3       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="co">#&gt; 4       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb4-34"><a href="#cb4-34"></a><span class="co">#&gt; 5       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA   aa   bb   cc   dd</span></span>
<span id="cb4-35"><a href="#cb4-35"></a><span class="co">#&gt; 6       NA      NA &lt;NA&gt; FALSE FALSE   FALSE   650    100   aa   bb   cc   dd</span></span>
<span id="cb4-36"><a href="#cb4-36"></a><span class="co">#&gt;    VLI  VLO   VB  VRI  VRO Data1 Data2 Data3 Data4 Data5 Data6 Data7 EffortDot</span></span>
<span id="cb4-37"><a href="#cb4-37"></a><span class="co">#&gt; 1 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Reco rder:  dd    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     FALSE</span></span>
<span id="cb4-38"><a href="#cb4-38"></a><span class="co">#&gt; 2 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Not  recor ding  molas  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     FALSE</span></span>
<span id="cb4-39"><a href="#cb4-39"></a><span class="co">#&gt; 3 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;    T1  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span id="cb4-40"><a href="#cb4-40"></a><span class="co">#&gt; 4    g    g    g    g    g     g     g     g     g     g  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span id="cb4-41"><a href="#cb4-41"></a><span class="co">#&gt; 5    g    g    g    g    g    aa    bb    cc    dd  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span id="cb4-42"><a href="#cb4-42"></a><span class="co">#&gt; 6    g    g    g    g    g   650   100  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE</span></span>
<span id="cb4-43"><a href="#cb4-43"></a><span class="co">#&gt;   EventNum          file_das line_num file_type</span></span>
<span id="cb4-44"><a href="#cb4-44"></a><span class="co">#&gt; 1        1 airdas_sample.das        1    turtle</span></span>
<span id="cb4-45"><a href="#cb4-45"></a><span class="co">#&gt; 2        2 airdas_sample.das        2    turtle</span></span>
<span id="cb4-46"><a href="#cb4-46"></a><span class="co">#&gt; 3        3 airdas_sample.das        3    turtle</span></span>
<span id="cb4-47"><a href="#cb4-47"></a><span class="co">#&gt; 4        4 airdas_sample.das        4    turtle</span></span>
<span id="cb4-48"><a href="#cb4-48"></a><span class="co">#&gt; 5        5 airdas_sample.das        5    turtle</span></span>
<span id="cb4-49"><a href="#cb4-49"></a><span class="co">#&gt; 6        6 airdas_sample.das        6    turtle</span></span></code></pre></div>
<p>Once you have processed the AirDAS data, you can easily access a variety of information. For instance, you can look at the different Beaufort values that occurred in the data, or filter for specific events to get the beginning and ending points of each effort section.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># The number of events per Beaufort value</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">table</span>(y.proc<span class="op">$</span>Bft)</span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt;  1  2 </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; 58 19</span></span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># Filter for T/R and O/E events to extract lat/lon points</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>y.proc <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="st">  </span><span class="kw">filter</span>(Event <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;T&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;E&quot;</span>, <span class="st">&quot;O&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="st">  </span><span class="kw">select</span>(Event, Lat, Lon, Trans)</span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;   Event      Lat       Lon Trans</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; 1     T 39.23550 -123.1563    T1</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt; 2     E 39.23400 -123.4047    T1</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt; 3     R 39.23400 -123.4742    T1</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt; 4     O 39.23283 -123.6033  &lt;NA&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt; 5     T 39.22000 -123.6078    T2</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt; 6     O 39.21700 -123.2417  &lt;NA&gt;</span></span></code></pre></div>
</div>
<div id="sightings" class="section level2">
<h2>Sightings</h2>
<p>The <code>swfscAirDAS</code> package does contain specific functions for extracting and/or summarizing particular information from the processed data. First is <code>airdas_sight</code>, a function that returns a data frame with pertinent sighting data extracted to their own columns</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>y.sight &lt;-<span class="st"> </span><span class="kw">airdas_sight</span>(y.proc)</span>
<span id="cb6-2"><a href="#cb6-2"></a></span>
<span id="cb6-3"><a href="#cb6-3"></a>y.sight <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">  </span><span class="kw">select</span>(Event, SightNo<span class="op">:</span>TurtleTail) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="st">  </span><span class="kw">head</span>()</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt;   Event SightNo Obs Angle SightStd Mixed SpCode GsTotal GsSp TurtleSize</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt; 1     S       1  cc    67     TRUE FALSE     mn       6    6         NA</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt; 2     S       2  bb   -60     TRUE FALSE     mn       6    6         NA</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt; 3     S       3  cc    38     TRUE FALSE     mn       2    2         NA</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt; 4     S       4  aa   -50     TRUE FALSE     mn       5    5         NA</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt; 5     S       5  cc    49     TRUE FALSE     bm       4    4         NA</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt; 6     S       6  cc    42     TRUE  TRUE     gg      10    8         NA</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;   TurtleDirection TurtleTail</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt; 1              NA       &lt;NA&gt;</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt; 2              NA       &lt;NA&gt;</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; 3              NA       &lt;NA&gt;</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt; 4              NA       &lt;NA&gt;</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co">#&gt; 5              NA       &lt;NA&gt;</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">#&gt; 6              NA       &lt;NA&gt;</span></span></code></pre></div>
</div>
<div id="effort" class="section level2">
<h2>Effort</h2>
<p>In addition, you can chop the effort data into segments, and summarize the conditions and sightings on those segments using <code>airdas_effort</code> and <code>airdas_effort_sight</code>. These effort segments can be used for line transect estimates using the Distance software, species distribution modeling, or summarizing the number of harbor porpoises on each transect, among other uses. <code>airdas_effort</code> chops continuous effort sections (the event sequence from T/R to E/O events) into effort segments using one of several different chopping methods: condition (a new effort segment every time a condition changes), equal length (effort segments of equal length), and section (each segment is a full continuous effort section, i.e. it runs from a T/R event to an E/O event). <code>airdas_effort_sight</code> takes the output of <code>airdas_effort</code> and returns the number of sightings and animals per segment for specified species codes.</p>
<p>Both functions return a list of three data frames: segdata, sightinfo, and randpicks. Briefly, as these data frames and the different chopping methodologies are described in depth in the function documentation (<code>?airdas_effort</code> and <code>?airdas_effort_sight</code>), segdata contains information about each effort segment, sightinfo contains information about the sightings on the segments, and randpicks contains information specific to the ‘equal length’ chopping method. These are separate functions to allow the user more control over the filters applied to determine which sightings should be included in the summaries (see <code>?airdas_effort</code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Chop the effort every time a condition changes</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>y.eff &lt;-<span class="st"> </span><span class="kw">airdas_effort</span>(</span>
<span id="cb7-3"><a href="#cb7-3"></a>  y.proc, <span class="dt">method =</span> <span class="st">&quot;condition&quot;</span>, <span class="dt">seg.min.km =</span> <span class="dv">0</span>, </span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="dt">dist.method =</span> <span class="st">&quot;greatcircle&quot;</span>, <span class="dt">conditions =</span> <span class="kw">c</span>(<span class="st">&quot;Bft&quot;</span>, <span class="st">&quot;CCover&quot;</span>), </span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="dt">num.cores =</span> <span class="dv">1</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>)</span>
<span id="cb7-7"><a href="#cb7-7"></a>y.eff.sight &lt;-<span class="st"> </span><span class="kw">airdas_effort_sight</span>(y.eff, <span class="dt">sp.codes =</span> <span class="kw">c</span>(<span class="st">&quot;bm&quot;</span>, <span class="st">&quot;dc&quot;</span>))</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="kw">head</span>(y.eff.sight<span class="op">$</span>segdata)</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;   segnum section_id section_sub_id event transect              file stlin</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt; 1      1          1              1     T       T1 airdas_sample.das     3</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt; 2      2          1              2     T       T1 airdas_sample.das    36</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt; 3      3          2              1     R       T1 airdas_sample.das    40</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt; 4      4          2              2     R       T1 airdas_sample.das    41</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt; 5      5          2              3     R       T1 airdas_sample.das    44</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt; 6      6          3              1     T       T2 airdas_sample.das    53</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt;   endlin     lat1      lon1           DateTime1     lat2      lon2</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt; 1     36 39.23550 -123.1563 2015-04-09 12:30:59 39.23400 -123.4033</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; 2     37 39.23400 -123.4033 2015-04-09 12:37:57 39.23400 -123.4047</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">#&gt; 3     41 39.23400 -123.4742 2015-04-09 12:40:00 39.23333 -123.4914</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#&gt; 4     44 39.23333 -123.4914 2015-04-09 12:40:28 39.23317 -123.5143</span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#&gt; 5     49 39.23317 -123.5143 2015-04-09 12:41:08 39.23283 -123.6032</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">#&gt; 6     78 39.22000 -123.6078 2015-04-09 12:46:51 39.21683 -123.3605</span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co">#&gt;             DateTime2     mlat      mlon           mDateTime    dist year month</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">#&gt; 1 2015-04-09 12:37:57 39.23309 -123.2797 2015-04-09 12:34:28 21.2882 2015     4</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">#&gt; 2 2015-04-09 12:38:00 39.23400 -123.4040 2015-04-09 12:37:58  0.1148 2015     4</span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="co">#&gt; 3 2015-04-09 12:40:28 39.23367 -123.4828 2015-04-09 12:40:14  1.4937 2015     4</span></span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="co">#&gt; 4 2015-04-09 12:41:08 39.23317 -123.5029 2015-04-09 12:40:48  1.9657 2015     4</span></span>
<span id="cb7-29"><a href="#cb7-29"></a><span class="co">#&gt; 5 2015-04-09 12:43:43 39.23245 -123.5588 2015-04-09 12:42:25  7.6620 2015     4</span></span>
<span id="cb7-30"><a href="#cb7-30"></a><span class="co">#&gt; 6 2015-04-09 12:54:04 39.21667 -123.4842 2015-04-09 12:50:27 21.3146 2015     4</span></span>
<span id="cb7-31"><a href="#cb7-31"></a><span class="co">#&gt;   day    mtime maxdistBft maxdistCCover nSI_bm ANI_bm nSI_dc ANI_dc</span></span>
<span id="cb7-32"><a href="#cb7-32"></a><span class="co">#&gt; 1   9 12:34:28          1            10      3     11      1      1</span></span>
<span id="cb7-33"><a href="#cb7-33"></a><span class="co">#&gt; 2   9 12:37:58          2            10      0      0      0      0</span></span>
<span id="cb7-34"><a href="#cb7-34"></a><span class="co">#&gt; 3   9 12:40:14          2            10      0      0      0      0</span></span>
<span id="cb7-35"><a href="#cb7-35"></a><span class="co">#&gt; 4   9 12:40:48          2            20      0      0      0      0</span></span>
<span id="cb7-36"><a href="#cb7-36"></a><span class="co">#&gt; 5   9 12:42:25          1            20      0      0      0      0</span></span>
<span id="cb7-37"><a href="#cb7-37"></a><span class="co">#&gt; 6   9 12:50:27          1            20      3     13      0      0</span></span>
<span id="cb7-38"><a href="#cb7-38"></a></span>
<span id="cb7-39"><a href="#cb7-39"></a><span class="kw">head</span>(y.eff.sight<span class="op">$</span>sightinfo)</span>
<span id="cb7-40"><a href="#cb7-40"></a><span class="co">#&gt;   segnum     mlat      mlon Event            DateTime      Lat       Lon</span></span>
<span id="cb7-41"><a href="#cb7-41"></a><span class="co">#&gt; 1      1 39.23309 -123.2797     S 2015-04-09 12:31:35 39.23367 -123.1783</span></span>
<span id="cb7-42"><a href="#cb7-42"></a><span class="co">#&gt; 2      1 39.23309 -123.2797     S 2015-04-09 12:31:47 39.23350 -123.1857</span></span>
<span id="cb7-43"><a href="#cb7-43"></a><span class="co">#&gt; 3      1 39.23309 -123.2797     S 2015-04-09 12:31:56 39.23333 -123.1917</span></span>
<span id="cb7-44"><a href="#cb7-44"></a><span class="co">#&gt; 4      1 39.23309 -123.2797     S 2015-04-09 12:32:20 39.23233 -123.2053</span></span>
<span id="cb7-45"><a href="#cb7-45"></a><span class="co">#&gt; 5      1 39.23309 -123.2797     S 2015-04-09 12:32:30 39.23233 -123.2108</span></span>
<span id="cb7-46"><a href="#cb7-46"></a><span class="co">#&gt; 6      1 39.23309 -123.2797     S 2015-04-09 12:32:42 39.23233 -123.2195</span></span>
<span id="cb7-47"><a href="#cb7-47"></a><span class="co">#&gt;   OnEffort Trans Bft CCover Jelly HorizSun VertSun HKR  Haze  Kelp RedTide</span></span>
<span id="cb7-48"><a href="#cb7-48"></a><span class="co">#&gt; 1     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span id="cb7-49"><a href="#cb7-49"></a><span class="co">#&gt; 2     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span id="cb7-50"><a href="#cb7-50"></a><span class="co">#&gt; 3     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span id="cb7-51"><a href="#cb7-51"></a><span class="co">#&gt; 4     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span id="cb7-52"><a href="#cb7-52"></a><span class="co">#&gt; 5     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span id="cb7-53"><a href="#cb7-53"></a><span class="co">#&gt; 6     TRUE    T1   1     10     0        6      NA   n FALSE FALSE   FALSE</span></span>
<span id="cb7-54"><a href="#cb7-54"></a><span class="co">#&gt;   AltFt SpKnot ObsL ObsB ObsR Rec VLI VLO VB VRI VRO EffortDot EventNum</span></span>
<span id="cb7-55"><a href="#cb7-55"></a><span class="co">#&gt; 1   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE        9</span></span>
<span id="cb7-56"><a href="#cb7-56"></a><span class="co">#&gt; 2   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       10</span></span>
<span id="cb7-57"><a href="#cb7-57"></a><span class="co">#&gt; 3   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       12</span></span>
<span id="cb7-58"><a href="#cb7-58"></a><span class="co">#&gt; 4   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       14</span></span>
<span id="cb7-59"><a href="#cb7-59"></a><span class="co">#&gt; 5   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       15</span></span>
<span id="cb7-60"><a href="#cb7-60"></a><span class="co">#&gt; 6   650    100   aa   bb   cc  dd   g   g  g   g   g      TRUE       16</span></span>
<span id="cb7-61"><a href="#cb7-61"></a><span class="co">#&gt;            file_das line_num file_type SightNo Obs Angle SightStd Mixed SpCode</span></span>
<span id="cb7-62"><a href="#cb7-62"></a><span class="co">#&gt; 1 airdas_sample.das        9    turtle       1  cc    67     TRUE FALSE     mn</span></span>
<span id="cb7-63"><a href="#cb7-63"></a><span class="co">#&gt; 2 airdas_sample.das       10    turtle       2  bb   -60     TRUE FALSE     mn</span></span>
<span id="cb7-64"><a href="#cb7-64"></a><span class="co">#&gt; 3 airdas_sample.das       12    turtle       3  cc    38     TRUE FALSE     mn</span></span>
<span id="cb7-65"><a href="#cb7-65"></a><span class="co">#&gt; 4 airdas_sample.das       14    turtle       4  aa   -50     TRUE FALSE     mn</span></span>
<span id="cb7-66"><a href="#cb7-66"></a><span class="co">#&gt; 5 airdas_sample.das       15    turtle       5  cc    49     TRUE FALSE     bm</span></span>
<span id="cb7-67"><a href="#cb7-67"></a><span class="co">#&gt; 6 airdas_sample.das       16    turtle       6  cc    42     TRUE  TRUE     gg</span></span>
<span id="cb7-68"><a href="#cb7-68"></a><span class="co">#&gt;   GsTotal GsSp TurtleSize TurtleDirection TurtleTail included</span></span>
<span id="cb7-69"><a href="#cb7-69"></a><span class="co">#&gt; 1       6    6         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span id="cb7-70"><a href="#cb7-70"></a><span class="co">#&gt; 2       6    6         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span id="cb7-71"><a href="#cb7-71"></a><span class="co">#&gt; 3       2    2         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span id="cb7-72"><a href="#cb7-72"></a><span class="co">#&gt; 4       5    5         NA              NA       &lt;NA&gt;    FALSE</span></span>
<span id="cb7-73"><a href="#cb7-73"></a><span class="co">#&gt; 5       4    4         NA              NA       &lt;NA&gt;     TRUE</span></span>
<span id="cb7-74"><a href="#cb7-74"></a><span class="co">#&gt; 6      10    8         NA              NA       &lt;NA&gt;    FALSE</span></span></code></pre></div>
<p>If you wanted to determine the number of humpback whales on each transect with a sighting angle between -60 and 60 degrees, for instance, you could do the following</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># &#39;Chop&#39; the effort by continuous effort section</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>y.eff.section &lt;-<span class="st"> </span><span class="kw">airdas_effort</span>(</span>
<span id="cb8-3"><a href="#cb8-3"></a>  y.proc, <span class="dt">method =</span> <span class="st">&quot;section&quot;</span>, <span class="dt">dist.method =</span> <span class="st">&quot;greatcircle&quot;</span>, <span class="dt">conditions =</span> <span class="ot">NULL</span>, </span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="dt">num.cores =</span> <span class="dv">1</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>)</span>
<span id="cb8-6"><a href="#cb8-6"></a>y.eff.section<span class="op">$</span>sightinfo &lt;-<span class="st"> </span>y.eff.section<span class="op">$</span>sightinfo <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">included =</span> <span class="kw">ifelse</span>(.data<span class="op">$</span>SpCode <span class="op">==</span><span class="st"> &quot;mn&quot;</span> <span class="op">&amp;</span><span class="st"> </span><span class="kw">abs</span>(.data<span class="op">$</span>Angle <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>), <span class="ot">FALSE</span>, .data<span class="op">$</span>included))</span>
<span id="cb8-8"><a href="#cb8-8"></a></span>
<span id="cb8-9"><a href="#cb8-9"></a>y.eff.section.sight &lt;-<span class="st"> </span><span class="kw">airdas_effort_sight</span>(y.eff.section, <span class="dt">sp.codes =</span> <span class="kw">c</span>(<span class="st">&quot;mn&quot;</span>))</span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a>y.eff.section.sight[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">transect_id =</span> <span class="kw">cumsum</span>(.data<span class="op">$</span>event <span class="op">==</span><span class="st"> &quot;T&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="st">  </span><span class="kw">group_by</span>(transect_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">dist_sum =</span> <span class="kw">sum</span>(dist), </span>
<span id="cb8-15"><a href="#cb8-15"></a>            <span class="dt">mn_count =</span> <span class="kw">sum</span>(ANI_mn)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="st">  </span><span class="kw">as.data.frame</span>() <span class="co">#for printing format</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt;   transect_id dist_sum mn_count</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">#&gt; 1           1  32.5244       20</span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co">#&gt; 2           2  31.5482       18</span></span></code></pre></div>
<p>In this example you could also simply group by the <code>transect</code> column, but that structure is not robust to analyzing multi-year data sets where the same transects are flown multiple times.</p>
</div>
<div id="comments" class="section level2">
<h2>Comments</h2>
<p>In AirDAS data, comments are a catch-all field, meaning they are used to record information that does not fit neatly into the AirDAS framework. For instance, users will often enter a comment indicating if they are or are not recording extra information such as mola mola sightings. Again, this information is not recorded in a systematic way, but you can still use swfscAirDAS functions to determine this information.</p>
<p>A comment indicating whether or not something is being recorded will likely contain “record” somewhere in the comment. Thus, you can use <code>airdas_comments</code> to extract comments, and then subset for comments that contain the pattern “record”.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>y.comm &lt;-<span class="st"> </span><span class="kw">airdas_comments</span>(y.proc)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">head</span>(y.comm)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt;   Event            DateTime      Lat       Lon OnEffort Trans Bft CCover Jelly</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">#&gt; 1     C 2015-04-09 12:30:59 39.23550 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">#&gt; 2     C 2015-04-09 12:30:59 39.23550 -123.1563    FALSE  &lt;NA&gt;  NA     NA    NA</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">#&gt; 3     C 2015-04-09 12:31:48 39.23350 -123.1857     TRUE    T1   1     10     0</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#&gt; 4     C 2015-04-09 12:34:56 39.23317 -123.2968     TRUE    T1   1     10     2</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt; 5     C 2015-04-09 12:35:32 39.23317 -123.3178     TRUE    T1   1     10     2</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt; 6     C 2015-04-09 12:38:00 39.23400 -123.4047    FALSE    T1   2     10     0</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt;   HorizSun VertSun  HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR  Rec</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt; 1       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt; 2       NA      NA &lt;NA&gt; FALSE FALSE   FALSE    NA     NA &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt; 3        6      NA    n FALSE FALSE   FALSE   650    100   aa   bb   cc   dd</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt; 4        6      NA    r FALSE FALSE    TRUE   650    100   aa   bb   cc   dd</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt; 5        6      NA    r FALSE FALSE    TRUE   650    100   aa   bb   cc   dd</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt; 6        6      NA    n FALSE FALSE   FALSE   650    100   aa   bb   cc   dd</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">#&gt;    VLI  VLO   VB  VRI  VRO Data1 Data2 Data3 Data4 Data5 Data6           Data7</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">#&gt; 1 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Reco rder:  dd    &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">#&gt; 2 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt;  Not  recor ding  molas  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">#&gt; 3    g    g    g    g    g  2 cp  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co">#&gt; 4    g    g    g    g    g  stre aky r ed ti de     &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="co">#&gt; 5    g    g    g    g    g  shar k 11f t      &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;            &lt;NA&gt;</span></span>
<span id="cb9-23"><a href="#cb9-23"></a><span class="co">#&gt; 6    g    g    g    g    g  off  effor t to  circl e on  unide ntifed object  </span></span>
<span id="cb9-24"><a href="#cb9-24"></a><span class="co">#&gt;   EffortDot EventNum          file_das line_num file_type</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="co">#&gt; 1     FALSE        1 airdas_sample.das        1    turtle</span></span>
<span id="cb9-26"><a href="#cb9-26"></a><span class="co">#&gt; 2     FALSE        2 airdas_sample.das        2    turtle</span></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="co">#&gt; 3      TRUE       11 airdas_sample.das       11    turtle</span></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="co">#&gt; 4      TRUE       21 airdas_sample.das       22    turtle</span></span>
<span id="cb9-29"><a href="#cb9-29"></a><span class="co">#&gt; 5      TRUE       24 airdas_sample.das       25    turtle</span></span>
<span id="cb9-30"><a href="#cb9-30"></a><span class="co">#&gt; 6     FALSE       37 airdas_sample.das       38    turtle</span></span>
<span id="cb9-31"><a href="#cb9-31"></a><span class="co">#&gt;                                     comment_str</span></span>
<span id="cb9-32"><a href="#cb9-32"></a><span class="co">#&gt; 1                                Recorder: dd  </span></span>
<span id="cb9-33"><a href="#cb9-33"></a><span class="co">#&gt; 2                           Not recording molas</span></span>
<span id="cb9-34"><a href="#cb9-34"></a><span class="co">#&gt; 3                                          2 cp</span></span>
<span id="cb9-35"><a href="#cb9-35"></a><span class="co">#&gt; 4                           streaky red tide   </span></span>
<span id="cb9-36"><a href="#cb9-36"></a><span class="co">#&gt; 5                                shark 11ft    </span></span>
<span id="cb9-37"><a href="#cb9-37"></a><span class="co">#&gt; 6  off effort to circle on unidentifed object</span></span>
<span id="cb9-38"><a href="#cb9-38"></a></span>
<span id="cb9-39"><a href="#cb9-39"></a><span class="kw">str_subset</span>(y.comm<span class="op">$</span>comment_str, <span class="st">&quot;record&quot;</span>) <span class="co">#Could also use grepl() here</span></span>
<span id="cb9-40"><a href="#cb9-40"></a><span class="co">#&gt; [1] &quot; Not recording molas&quot;</span></span></code></pre></div>
<p>You can extract data from ‘systematic’ comments, using <code>airdas_comments_process</code>. This function supports both the codes of TURTLE/PHOCOENA data, and the text string format of CARETTA data. Specifically, it includes a <code>comment.format</code> argument for users with CARETTA data, which allows you to provide a list specifying how the data was recorded, although the data must be separated by a delimiter. See below for the <code>comment.format</code> value for default CARETTA data. This function also by default looks for codes, e.g. “fb” or “cp”, in TURTLE/PHOCOENA data; see <code>?airdas_comments_process</code> for more details.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># comment.format for default CARETTA data</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>comment.format &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>, </span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&quot;character&quot;</span>, <span class="st">&quot;character&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;character&quot;</span>)</span>
<span id="cb10-5"><a href="#cb10-5"></a>)</span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co"># TURTLE/PHOCOENA comment-data</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="kw">head</span>(<span class="kw">airdas_comments_process</span>(y.proc))</span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt;   Event            DateTime      Lat       Lon OnEffort Trans Bft CCover Jelly</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt; 1     C 2015-04-09 12:31:48 39.23350 -123.1857     TRUE    T1   1     10     0</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt; 2     C 2015-04-09 12:42:01 39.23267 -123.5433     TRUE    T1   1     20     0</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt; 3     C 2015-04-09 12:42:01 39.23267 -123.5433     TRUE    T1   1     20     0</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt;   HorizSun VertSun HKR  Haze  Kelp RedTide AltFt SpKnot ObsL ObsB ObsR Rec VLI</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt; 1        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">#&gt; 2        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt; 3        6      NA   n FALSE FALSE   FALSE   650    100   aa   bb   cc  dd   g</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#&gt;   VLO VB VRI VRO Data1 Data2 Data3 Data4 Data5 Data6 Data7 EffortDot EventNum</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#&gt; 1   g  g   g   g  2 cp  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       11</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#&gt; 2   g  g   g   g  fb2s  fb1m  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       45</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">#&gt; 3   g  g   g   g  fb2s  fb1m  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;      TRUE       45</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">#&gt;            file_das line_num file_type comment_str     Misc1 Misc2 Value</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">#&gt; 1 airdas_sample.das       11    turtle        2 cp  crab pot  &lt;NA&gt;     2</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co">#&gt; 2 airdas_sample.das       46    turtle   fb2s fb1m fish ball     s     2</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co">#&gt; 3 airdas_sample.das       46    turtle   fb2s fb1m fish ball     m     1</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co">#&gt;   flag_check</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">#&gt; 1      FALSE</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="co">#&gt; 2      FALSE</span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co">#&gt; 3      FALSE</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
